<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Search Houses</title>
    <link rel="stylesheet" href="https://stackpath.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
    <div class="navbar">
        <a href="/"><img src="{{ url_for('static', filename='logo_home.png') }}" alt="Home Logo" class="logo-home"></a>
        <a href="/">Home</a>
        <a href="/about">About</a>
        <a href="/source">Source</a>
    </div>
    <div class="container">
      <div class="header text-center">
        <h1>Search Houses by Zip Code</h1>
      </div>
      <form method="post" action="/by_zip_code" class="text-center">
        <div class="form-group">
          <label for="zip_codes">Enter Zip Codes (comma separated):</label>
          <input type="text" name="zip_codes" id="zip_codes" class="form-control input-rounded" placeholder="Enter Zip Codes" required>
        </div>
        <div class="form-group">
          <label for="start_date">Select Start Date:</label>
          <input type="text" name="start_date" id="start_date" class="form-control input-rounded" required>
        </div>
        <div class="form-group">
          <label for="end_date">Select End Date:</label>
          <input type="text" name="end_date" id="end_date" class="form-control input-rounded" required>
        </div>
        <button type="submit" class="btn-rounded">Search</button>
      </form>
      <div id="map" style="height: 400px; margin-top: 20px;"></div>
    </div>
    <footer class="footer">
      &copy; 2024 Statistics 418 Final Project
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/index.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Initialize Flatpickr
      flatpickr("#start_date", {
        dateFormat: "Y-m",
        altInput: true,
        altFormat: "F Y",
        allowInput: true,
        plugins: [new monthSelectPlugin({
          shorthand: true, // defaults to false
          dateFormat: "Y-m", // defaults to "F Y"
          altFormat: "F Y", // defaults to "F Y"
          theme: "light" // defaults to "light"
        })]
      });

      flatpickr("#end_date", {
        dateFormat: "Y-m",
        altInput: true,
        altFormat: "F Y",
        allowInput: true,
        plugins: [new monthSelectPlugin({
          shorthand: true, // defaults to false
          dateFormat: "Y-m", // defaults to "F Y"
          altFormat: "F Y", // defaults to "F Y"
          theme: "light" // defaults to "light"
        })]
      });

      // Initialize the map
      var map = L.map('map').setView([37.8, -96], 4); // Center on the US

      // Add a tile layer
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);
    </script>
  </body>
</html>
